<dataConfig>
    
    <dataSource 
    	driver="com.mysql.jdbc.Driver" 
		url="!sourcerer.db.url!" 
    	user="!sourcerer.db.user!" 
    	password="!sourcerer.db.password!"
    	autoCommit="false"
    	readOnly="true" 
    	batchSize="-1"
    	 />
    	
    <document name="entity">
	    <entity name="code_entity" pk="entity_id" 
	    	transformer="edu.uci.ics.sourcerer.search.analysis.FqnCleaningTransformer"
		    query="select entity_id, fqn
			 from entities as e
			 inner join projects as proj on proj.project_id=e.project_id
			 where e.length > 0
			 and e.entity_type in ('CLASS','METHOD','CONSTRUCTOR')
			 and proj.has_source=1
			 and proj.project_type='CRAWLED'
			 and (e.entity_id &gt;= '${dataimporter.request.lo_eid_incl}' and e.entity_id &lt; '${dataimporter.request.hi_eid_excl}')"

		    deltaQuery="select entity_id from entities 
		    		where last_modified > '${dataimporter.last_index_time}'">

		<field column="entity_id" name="entity_id" />
		
		<entity name="jdklib_use" 
			query="select provE.fqn as pfqn
			 from relations as R
			 inner join entities as provE on provE.entity_id=R.rhs_eid
			 where R.internal = 0 
			 and R.relation_type in ('CALLS','EXTENDS','IMPLEMENTS','INSTANTIATES','USES')			 
			 and R.lhs_eid='${code_entity.entity_id}'">
			
			<field column="pfqn" name="jdkLib_use_fqn_full" />
		</entity>
		
       </entity>
    </document>
</dataConfig>

